# 批量图片重命名工具说明

## 功能概述
这是一个强大的批量图片重命名工具，支持递归处理子文件夹，将图片按照 `PIC_000001`, `PIC_000002` 等格式进行重命名。

## 主要特性

### 📁 子文件夹处理
程序现在支持三种子文件夹处理模式：

1. **扁平化模式 (`flatten`)**
   - 将所有子文件夹中的图片移动到根目录
   - 所有文件统一编号：`PIC_000001.jpg`, `PIC_000002.png`, ...
   - 原有文件夹结构会被破坏

2. **保持结构模式 (`keep_structure`)**
   - 保持原有文件夹结构不变
   - 在每个文件夹内部独立重命名
   - 不同文件夹可能有相同编号的文件

3. **保持结构全局编号 (`separate_numbering`)** ⭐ **推荐**
   - 保持原有文件夹结构
   - 全局统一编号，确保每个文件都有唯一编号
   - 既保持了组织结构，又避免了编号冲突

### 🔄 递归处理
- `RECURSIVE_PROCESS = True`: 处理所有子文件夹中的图片
- `RECURSIVE_PROCESS = False`: 仅处理根目录中的图片

### 💾 备份功能
- 自动创建 `backup_original_names` 文件夹
- 生成详细的文件名映射记录
- 记录处理模式和配置信息

## 配置参数

```python
# ====== 配置区域 ======
IMAGE_FOLDER_PATH = r"E:\001 项目数据集\inputfile"  # 图片文件夹路径
FILE_PREFIX = "PIC_"                                # 重命名前缀
NUMBER_DIGITS = 6                                   # 数字位数
RECURSIVE_PROCESS = True                            # 是否递归处理
SUBFOLDER_MODE = "separate_numbering"               # 子文件夹处理模式
CREATE_BACKUP = True                                # 是否创建备份
```

## 使用示例

### 示例1：扁平化处理
```
原始结构:
📁 photos/
  📁 2023/
    📄 IMG_001.jpg
    📄 IMG_002.jpg
  📁 2024/
    📄 photo1.png
    📄 photo2.png

处理后 (flatten):
📁 photos/
  📄 PIC_000001.jpg
  📄 PIC_000002.jpg
  📄 PIC_000003.png
  📄 PIC_000004.png
```

### 示例2：保持结构全局编号
```
原始结构:
📁 photos/
  📁 2023/
    📄 IMG_001.jpg
    📄 IMG_002.jpg
  📁 2024/
    📄 photo1.png
    📄 photo2.png

处理后 (separate_numbering):
📁 photos/
  📁 2023/
    📄 PIC_000001.jpg
    📄 PIC_000002.jpg
  📁 2024/
    📄 PIC_000003.png
    📄 PIC_000004.png
```

## 支持的图片格式
- `.jpg`, `.jpeg`
- `.png`
- `.gif`
- `.bmp`
- `.tiff`, `.tif`
- `.webp`

## 安全特性
1. **冲突检测**: 自动检测文件名冲突，避免覆盖
2. **备份功能**: 保存原始文件名映射
3. **确认机制**: 执行前需要用户确认
4. **详细日志**: 记录所有操作过程
5. **错误处理**: 失败时不影响其他文件

## 使用步骤
1. 修改 `IMAGE_FOLDER_PATH` 为你的图片文件夹路径
2. 根据需要调整其他配置参数
3. 运行程序：`python auto_batch_image_renamer.py`
4. 查看预览信息
5. 确认执行重命名

## 注意事项
- ⚠️ 请务必备份重要数据
- ⚠️ 建议先在测试文件夹中试运行
- ⚠️ 确保有足够的磁盘空间
- ⚠️ 扁平化模式会改变文件夹结构

## 日志文件
程序会生成 `image_renamer.log` 日志文件，记录详细的操作信息。
